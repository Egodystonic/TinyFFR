material {
	name : %NAME%,
	parameters : [
		{
			type : sampler2d,
			name : color_map
		}
#if Normals
		,
		{
			type : sampler2d,
			name : normal_map
		}
#endif Normals
#if Orm
		,
		{
			type : sampler2d,
			name : orm_map
		}
#endif Orm
#if Emissive
		,
		{
			type : sampler2d,
			name : emissive_map
		}
#endif Emissive
#if Anisotropy
		,
		{
			type : sampler2d,
			name : anisotropy_map
		}
#endif Anisotropy
#if Clearcoat
		,
		{
			type : sampler2d,
			name : clearcoat_map
		}
#endif Clearcoat
	],
	requires : [
		uv0
	],
	shadingModel : lit,
	flipUV : false,
#option AlphaMode
#variant AlphaOff
	blending : opaque
#variant AlphaOn
	blending : masked
#variant AlphaOnBlended
	blending : fade
#endoption
}

fragment {
	void material(inout MaterialInputs material) {
		vec2 uv0 = getUV0();

#if Normals
		material.normal = texture(materialParams_normal_map, uv0).xyz * 2.0 - 1.0;
		material.normal.y = -material.normal.y;
#endif Normals

		prepareMaterial(material);

#option AlphaMode
#variant AlphaOff
		material.baseColor.rgb = texture(materialParams_color_map, uv0).rgb;
#variant AlphaOn
		material.baseColor.rgba = texture(materialParams_color_map, uv0).rgba;
#variant AlphaOnBlended
		material.baseColor.rgba = texture(materialParams_color_map, uv0).rgba;
#endoption

#if Orm
#option OrmReflectance
#variant On
		vec4 ormr = texture(materialParams_orm_map, uv0).rgba;
		material.ambientOcclusion = ormr.r;
		material.roughness = ormr.g;
		material.metallic = ormr.b;
		material.reflectance = ormr.a;
#variant Off
		vec3 orm = texture(materialParams_orm_map, uv0).rgb;
		material.ambientOcclusion = orm.r;
		material.roughness = orm.g;
		material.metallic = orm.b;
#endoption
#endif Orm

#if Emissive
		vec4 emissive = texture(materialParams_emissive_map, uv0).rgba;
		material.emissive.rgb = emissive.rgb * 10.0 * emissive.a;
		material.emissive.a = 0.5;
#endif Emissive

#if Anisotropy
		vec3 anisotropy = texture(materialParams_anisotropy_map, uv0).rgb;
		material.anisotropyDirection = vec3(anisotropy.rg * 2.0 - 1.0, 0.0);
		material.anisotropy = anisotropy.b;
#endif Anisotropy

#if ClearCoat
		vec2 clearcoat = texture(materialParams_clearcoat_map, uv0).rg;
		material.clearCoat = clearcoat.r;
		material.clearCoatRoughness = clearcoat.g;
#endif ClearCoat
	}
}